Chats
=====

### Base fields

| Column name               | Type                                                                   | Required | Possible values                                                                                                     | Default | Description                                                                                                                             | Examples                                                          |
| --------------------------|------------------------------------------------------------------------|----------|---------------------------------------------------------------------------------------------------------------------|---------|-----------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
| person                    | string                                                                 |          |                                                                                                                     |         | Author oid or email.                                                                                                                    | user@example.com, user_1                                          |
| agent                     | string                                                                 |          |                                                                                                                     |         | Agent oid or email.                                                                                                                     | agent@example.com, agent_1                                        |
| subject                   | string                                                                 |          |                                                                                                                     |         | Chat subject.                                                                                                                           |                                                                   |
| date_created              | DateTime                                                               |          |                                                                                                                     | NOW()   | Date created.                                                                                                                           | 2016-07-12 00:00:00                                               |
| date_ended                | DateTime                                                               |          |                                                                                                                     | NOW()   | Date ended.                                                                                                                             | 2016-07-12 00:00:00                                               |
| ended_by                  | string                                                                 |  *       | "timeout" <br/> "abandoned" <br/> "agent" <br/> "user"                                                              | NOW()   | Chat end reason.                                                                                                                        |                                                                   |
| labels                    | string[]                                                               |          |                                                                                                                     | [ ]     | Chat labels.                                                                                                                            | ["label 1", "label 2"]                                            |
| custom_fields             | [CustomField\[\]](../person_custom_def#how-to-set-custom-field-values) |          |                                                                                                                     | [ ]     | Chat custom fields.                                                                                                                     |                                                                   |
| messages                  | [ChatMessage\[\]](#chatmessage-fields)                                 |  *       |                                                                                                                     | [ ]     | Chat messages, should be at least one message.                                                                                          |                                                                   |
| rating_overall            | integer                                                                |          | 0-10                                                                                                                | 0       | Chat feedback helpful rating. '0' - not helpful, '10' - very helpful.                                                                   |                                                                   |
| rating_comment            | string                                                                 |          |                                                                                                                     |         | Chat feedback comment.                                                                                                                  |                                                                   |


### ChatMessage fields

| Column name               | Type                                           | Required | Possible values                                                                                             | Default | Description                                                                                                                             | Examples                                                          |
| --------------------------|------------------------------------------------|----------|-------------------------------------------------------------------------------------------------------------|---------|-----------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
| oid                       | string                                         |  *       |                                                                                                             |         | External source id, use it to update messages properly.                                                                                 |                                                                   |
| person                    | string                                         |          |                                                                                                             |         | Author oid or email.                                                                                                                    | user@example.com, user_1, agent_1                                 |
| content                   | string                                         |  *       |                                                                                                             |         | Chat message.                                                                                                                           |                                                                   |
| date_created              | DateTime                                       |          |                                                                                                             | NOW()   | Date created.                                                                                                                           | 2016-07-12 00:00:00                                               |
